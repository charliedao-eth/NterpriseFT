---
title: "NterpriseFT MVP"
author: "CharlieDAO"
date: "2/18/2022"
output: html_document
---

```{r include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
# prepare env
library(dplyr)
library(reshape)
library(ggplot2)
library(hash)

# loading helper functions
helperFunctionPath <- ('functions/helper_functions/')
sapply(list.files(pattern='[.]R$', path=helperFunctionPath, full.names=TRUE), source)

visualsFunctionsPath <- ('functions/visuals_functions/')
sapply(list.files(pattern='[.]R$', path=visualsFunctionsPath, full.names=TRUE), source)

# load data
getLatestDataFromGithub()
```

# Twitter Followers Over Time
```{r echo=FALSE}
message('---Twitter Followers Over Time---')

dataframeHash <- hash()
.set(dataframeHash, 'Bored Ape Yacht Club'=bayc_history)
.set(dataframeHash, 'Treeverse'=treeverse_history)
.set(dataframeHash, 'World of Women'=wow_history)

for (nftName in keys(dataframeHash)) {
  message(paste0('\n', nftName, ':', '\n'))
  plotDf <- values(dataframeHash, keys=nftName)[[1]]
  
  createNftTimeSeriesPlot(
    dataframe=plotDf,
    dateCol='date',
    outcomeCols='followers',
    nftName=nftName,
    title='Twitter Followers Over Time',
    logScale=FALSE,
    savePlotData=TRUE
  )
}
```

# Typical ETH Sales Price Over Time
```{r echo=FALSE}
message('---Typical ETH Sales Price Over Time---')

dataframeHash <- hash()
.set(dataframeHash, 'Bored Ape Yacht Club'=bayc_sales)
.set(dataframeHash, 'Mutant Ape Yacht Club'=mayc_sales)
.set(dataframeHash, 'Treeverse'=treeverse_sales)
.set(dataframeHash, 'World of Women'=wow_sales)

for (nftName in keys(dataframeHash)) {
  message(paste0('\n', nftName, ':', '\n'))
  plotDf <- values(dataframeHash, keys=nftName)[[1]]
  
  # returns date, min_price, median_price, and max_price
  typicalSalesDf <- getTypicalDailySalesPrice(
    dataframe=plotDf,
    dateCol='BLOCK_TIMESTAMP',
    priceCol='PRICE'
  )
  
  createNftTimeSeriesPlot(
    dataframe=typicalSalesDf,
    dateCol='date',
    outcomeCols=c('min_price', 'median_price'),
    nftName=nftName,
    title='Typical ETH Sales Price Over Time',
    logScale=FALSE,
    savePlotData=TRUE
  )
}
```

# Sales Count Over Time
```{r echo=FALSE}
message('---Sales Count Over Time---')

dataframeHash <- hash()
.set(dataframeHash, 'Bored Ape Yacht Club'=bayc_sales)
.set(dataframeHash, 'Mutant Ape Yacht Club'=mayc_sales)
.set(dataframeHash, 'Treeverse'=treeverse_sales)
.set(dataframeHash, 'World of Women'=wow_sales)

for (nftName in keys(dataframeHash)) {
  message(paste0('\n', nftName, ':', '\n'))
  plotDf <- values(dataframeHash, keys=nftName)[[1]]
  
  # returns date, sales_count
  dailySalesCountDf <- getDailySalesCount(
    dataframe=plotDf,
    dateCol='BLOCK_TIMESTAMP'
  )
  
  createNftTimeSeriesPlot(
    dataframe=dailySalesCountDf,
    dateCol='date',
    outcomeCols='sales_count',
    nftName=nftName,
    title='Sales Count Over Time',
    logScale=FALSE,
    savePlotData=TRUE
  )
}
```
